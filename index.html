<!doctype html>
<html lang="en">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<head>
    <script src="https://cdn.firebase.com/js/client/2.2.9/firebase.js"></script>
</head>
<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  padding: 0 30px; /* top/bottom left/right */
}
</style>
<body>

<center>
<img src='http://www.usewaterwisely.com/images/waterWizard-base.png'>
<h1>Water Wizard</h1>
</center>

<h3>Next watering time: 7:00 pm (in 3 hours)</h3>

<h3>Watering Profile</h3>
<select>
  <option value="volvo">Water the plants</option>
  <option value="saab">Feed the dog</option>
</select>
<button>New Profile</button><button>Delete Profile</button>
<h3>Set watering time blocks</h3>
<button>Add new </button>
<table id="schedules" border="1">
  <tr>
    <td>Repeat?</td>
    <td>Time</td>
    <td>Days</td>
    <td>Frequency Timer</td>
    <td>Do not repeat if</td>
    <td>Flow Duration</td>
    <td>Modify flow if</td>
    <td>Date</td>
    <td></td>
  </tr>
  <tr>
    <td>
      <input type="checkbox">
    </td>
    <td><input type="text" class="needs-timepick" value=""></td>
    <td>
      <input type="checkbox" value="Sunday">S
      <input type="checkbox" value="Monday">M
      <input type="checkbox" value="Tuesday">T
      <input type="checkbox" value="Wednesday">W
      <input type="checkbox" value="Thursday">Th
      <input type="checkbox" value="Friday">F
      <input type="checkbox" value="Saturday">Sa
    </td>
    <td>Every <input type="number" style="width:30px">
      <select>
        <option value="volvo">hours</option>
        <option value="saab">minutes</option>
        <option value="saab">seconds</option>
      </select> 
    </td>
    <td>
      <input type="checkbox" value="Saturday">Rain within <input type="number" style="width:30px"> day(s)
      <br>
      <input type="checkbox" value="Saturday">Hot    
    </td>
    <td>
      <input type="number" style="width:30px">
      <select>
        <option value="volvo">sec</option>
        <option value="saab">min</option>
        <option value="saab">hrs</option>
      </select> 
    </td>
    <td>
      <input type="checkbox">Temp over <input type="number" style="width:30px">
      &deg;F
    </td>
    <td></td>
    <td><a href>x</a></td>
  </tr>
</table>

<br><br>
Temperature Sensor: <span id="temp"></span>
<br>
Humidity: <span id="humidity"></span>
<br>
Timestamp: <span id="tstamp"></span>

<h3>Weather: 75&deg;F</h3> 
Tomorrow: 74&deg;F, Rain

<form action="https://api.particle.io/v1/devices/54ff6a066672524819361267/led?access_token=22de5c62f0253e4cabad74d98664301dabaa4859" method="POST">
  <h3>Manual Control</h3>
    <input type="radio" name="args" value="on">Open
    <br>
    <input type="radio" name="args" value="off">Close
    <br>
    <br>
    <input type="submit" value="Go!">
  </form>
  
  <h3>Water Used: 20 L the past week</h3>
  <h3>Water History:</h3>
  <ul>
    <li>Watered for 1 minute at 7:00pm yesterday</li>
    <li>Watered for 1 minute at 7:00pm Thursday 9/10/15</li>
    <a href>More...</a>
    <br>[Visualization?]
  </ul>
  
  <h3>Temperature History:</h3>

  <h3>Humidity History:</h3>
  
  <h3>Combined Graph</h3>

<script>
  updateSensorData();

    var myFirebaseRef = new Firebase("https://mhacks6.firebaseio.com/");
    var tempRef = myFirebaseRef.child("curr_temp");
    var humidityRef = myFirebaseRef.child("curr_humidity");

  function updateSensorData() {
    document.getElementById("temp").innerHTML = "Waiting for data...";
    document.getElementById("humidity").innerHTML = "Waiting for data...";
    document.getElementById("tstamp").innerHTML ="Waiting for data...";
    
    window.setInterval(function() {
      
      var deviceID = "54ff6a066672524819361267";
      var accessToken = "22de5c62f0253e4cabad74d98664301dabaa4859";
      var varName1 = "temperature";
      var varName2 = "humidity";

      requestURL = "https://api.particle.io/v1/devices/" + deviceID + "/" + varName1 + "/?access_token=" + accessToken;
      $.getJSON(requestURL, function(json) {
               document.getElementById("temp").innerHTML = json.result + "&deg; F";
               tempRef.set(json.result);
               });
      requestURL2 = "https://api.particle.io/v1/devices/" + deviceID + "/" + varName2 + "/?access_token=" + accessToken;
      $.getJSON(requestURL2, function(json) {
               document.getElementById("humidity").innerHTML = json.result + "% Humidity";
               humidityRef.set(json.result);
               document.getElementById("tstamp").innerHTML = json.coreInfo.last_heard;
               });
    }, 6000);
  }

</script>

</html>
